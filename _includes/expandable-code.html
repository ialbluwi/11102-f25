{% assign unique_id = include.id | default: 'code' | append: '-' | append: forloop.index0 | default: '0' %}

<div class="expandable-code">
    <!-- Header / Summary -->
<div class="expandable-code-header" onclick="toggleExpandableCode('{{ unique_id }}-content', this)">
    <span class="expandable-code-title">{{ include.title | default: "Code Example" }}</span>
    <button class="expandable-toggle-btn">
    <span class="expandable-arrow"></span>
    <span class="expandable-label">Expand</span>
</button>
</div>

    <div class="expandable-code-content" id="{{ unique_id }}-content">
        <div class="expandable-code-wrapper">
            <button class="expandable-copy-btn"
                    onclick="event.stopPropagation(); copyExpandableCode('{{ unique_id }}-block', this)">
                Copy
            </button>

            <div class="expandable-code-block" id="{{ unique_id }}-block">
                {% if include.file %}
                    {% capture code_content %}{% include {{ include.file}} %}{% endcapture %}
                {% else %}
                    {% assign code_content = include.code %}
                {% endif %}

                {% highlight python %}
{{ code_content }}
                {% endhighlight %}
            </div>
        </div>
    </div>
</div>

